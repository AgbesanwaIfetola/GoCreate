{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireWildcard","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/slicedToArray","data":{"isAsync":false}},{"name":"react","data":{"isAsync":false}},{"name":"./NavigationStateContext","data":{"isAsync":false}}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var _interopRequireWildcard = _$$_REQUIRE(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireWildcard\");\n\n  var _interopRequireDefault = _$$_REQUIRE(_dependencyMap[1], \"@babel/runtime/helpers/interopRequireDefault\");\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.default = useOptionsGetters;\n\n  var _slicedToArray2 = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[2], \"@babel/runtime/helpers/slicedToArray\"));\n\n  var React = _interopRequireWildcard(_$$_REQUIRE(_dependencyMap[3], \"react\"));\n\n  var _NavigationStateContext = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[4], \"./NavigationStateContext\"));\n\n  function useOptionsGetters(_ref) {\n    var key = _ref.key,\n        getOptions = _ref.getOptions,\n        getState = _ref.getState;\n\n    var _React$useState = React.useState(0),\n        _React$useState2 = (0, _slicedToArray2.default)(_React$useState, 2),\n        numberOfChildrenListeners = _React$useState2[0],\n        setNumberOfChildrenListeners = _React$useState2[1];\n\n    var optionsGettersFromChild = React.useRef({});\n\n    var _React$useContext = React.useContext(_NavigationStateContext.default),\n        parentAddOptionsGetter = _React$useContext.addOptionsGetter;\n\n    var getOptionsFromListener = React.useCallback(function () {\n      for (var _key in optionsGettersFromChild.current) {\n        if (optionsGettersFromChild.current.hasOwnProperty(_key)) {\n          var _optionsGettersFromCh, _optionsGettersFromCh2;\n\n          var result = (_optionsGettersFromCh = (_optionsGettersFromCh2 = optionsGettersFromChild.current)[_key]) == null ? void 0 : _optionsGettersFromCh.call(_optionsGettersFromCh2);\n\n          if (result !== null) {\n            return result;\n          }\n        }\n      }\n\n      return null;\n    }, []);\n    var getCurrentOptions = React.useCallback(function () {\n      var _getOptions;\n\n      if (getState) {\n        var state = getState();\n\n        if (state.routes[state.index].key !== key) {\n          return null;\n        }\n      }\n\n      var optionsFromListener = getOptionsFromListener();\n\n      if (optionsFromListener !== null) {\n        return optionsFromListener;\n      }\n\n      return (_getOptions = getOptions == null ? void 0 : getOptions()) != null ? _getOptions : undefined;\n    }, [getState, getOptionsFromListener, getOptions, key]);\n    React.useEffect(function () {\n      return parentAddOptionsGetter == null ? void 0 : parentAddOptionsGetter(key, getCurrentOptions);\n    }, [getCurrentOptions, parentAddOptionsGetter, key]);\n    var addOptionsGetter = React.useCallback(function (key, getter) {\n      optionsGettersFromChild.current[key] = getter;\n      setNumberOfChildrenListeners(function (prev) {\n        return prev + 1;\n      });\n      return function () {\n        setNumberOfChildrenListeners(function (prev) {\n          return prev - 1;\n        });\n        delete optionsGettersFromChild.current[key];\n      };\n    }, []);\n    var hasAnyChildListener = React.useMemo(function () {\n      return numberOfChildrenListeners > 0;\n    }, [numberOfChildrenListeners]);\n    return {\n      addOptionsGetter: addOptionsGetter,\n      getCurrentOptions: getCurrentOptions,\n      hasAnyChildListener: hasAnyChildListener\n    };\n  }\n});","lineCount":90,"map":[[13,0,1,0],[15,0,2,0],[17,0,5,15],[17,11,5,24,"useOptionsGetters"],[17,28,5,15],[17,35,13,3],[18,0,13,3],[18,8,6,2,"key"],[18,11,13,3],[18,19,6,2,"key"],[18,22,13,3],[19,0,13,3],[19,8,7,2,"getOptions"],[19,18,13,3],[19,26,7,2,"getOptions"],[19,36,13,3],[20,0,13,3],[20,8,8,2,"getState"],[20,16,13,3],[20,24,8,2,"getState"],[20,32,13,3],[22,0,13,3],[22,26,17,6,"React"],[22,31,17,11],[22,32,17,12,"useState"],[22,40,17,6],[22,41,17,21],[22,42,17,6],[22,43,13,3],[23,0,13,3],[24,0,13,3],[24,8,15,4,"numberOfChildrenListeners"],[24,33,13,3],[25,0,13,3],[25,8,16,4,"setNumberOfChildrenListeners"],[25,36,13,3],[27,0,18,2],[27,8,18,8,"optionsGettersFromChild"],[27,31,18,31],[27,34,18,34,"React"],[27,39,18,39],[27,40,18,40,"useRef"],[27,46,18,34],[27,47,20,4],[27,49,18,34],[27,50,18,2],[29,0,13,3],[29,28,22,55,"React"],[29,33,22,60],[29,34,22,61,"useContext"],[29,44,22,55],[29,45,23,4,"NavigationStateContext"],[29,76,22,55],[29,77,13,3],[30,0,13,3],[30,8,22,28,"parentAddOptionsGetter"],[30,30,13,3],[30,51,22,10,"addOptionsGetter"],[30,67,13,3],[32,0,26,2],[32,8,26,8,"getOptionsFromListener"],[32,30,26,30],[32,33,26,33,"React"],[32,38,26,38],[32,39,26,39,"useCallback"],[32,50,26,33],[32,51,26,51],[32,63,26,57],[33,0,27,4],[33,11,27,9],[33,15,27,13,"key"],[33,19,27,4],[33,23,27,20,"optionsGettersFromChild"],[33,46,27,43],[33,47,27,44,"current"],[33,54,27,4],[33,56,27,53],[34,0,28,6],[34,12,28,10,"optionsGettersFromChild"],[34,35,28,33],[34,36,28,34,"current"],[34,43,28,10],[34,44,28,42,"hasOwnProperty"],[34,58,28,10],[34,59,28,57,"key"],[34,63,28,10],[34,64,28,6],[34,66,28,63],[35,0,28,63],[37,0,29,8],[37,14,29,14,"result"],[37,20,29,20],[37,48,29,23],[37,74,29,23,"optionsGettersFromChild"],[37,97,29,46],[37,98,29,47,"current"],[37,105,29,23],[37,107,29,55,"key"],[37,111,29,23],[37,112,29,20],[37,133,29,23],[37,183,29,8],[39,0,31,8],[39,14,31,12,"result"],[39,20,31,18],[39,25,31,23],[39,29,31,8],[39,31,31,29],[40,0,32,10],[40,19,32,17,"result"],[40,25,32,10],[41,0,33,9],[42,0,34,7],[43,0,35,5],[45,0,36,4],[45,13,36,11],[45,17,36,4],[46,0,37,3],[46,5,26,33],[46,7,37,5],[46,9,26,33],[46,10,26,2],[47,0,39,2],[47,8,39,8,"getCurrentOptions"],[47,25,39,25],[47,28,39,28,"React"],[47,33,39,33],[47,34,39,34,"useCallback"],[47,45,39,28],[47,46,39,46],[47,58,39,52],[48,0,39,52],[50,0,40,4],[50,10,40,8,"getState"],[50,18,40,4],[50,20,40,18],[51,0,41,6],[51,12,41,12,"state"],[51,17,41,17],[51,20,41,20,"getState"],[51,28,41,28],[51,30,41,6],[53,0,42,6],[53,12,42,10,"state"],[53,17,42,15],[53,18,42,16,"routes"],[53,24,42,10],[53,25,42,23,"state"],[53,30,42,28],[53,31,42,29,"index"],[53,36,42,10],[53,38,42,36,"key"],[53,41,42,10],[53,46,42,44,"key"],[53,49,42,6],[53,51,42,49],[54,0,44,8],[54,17,44,15],[54,21,44,8],[55,0,45,7],[56,0,46,5],[58,0,48,4],[58,10,48,10,"optionsFromListener"],[58,29,48,29],[58,32,48,32,"getOptionsFromListener"],[58,54,48,54],[58,56,48,4],[60,0,49,4],[60,10,49,8,"optionsFromListener"],[60,29,49,27],[60,34,49,32],[60,38,49,4],[60,40,49,38],[61,0,50,6],[61,15,50,13,"optionsFromListener"],[61,34,50,6],[62,0,51,5],[64,0,52,4],[64,28,52,11,"getOptions"],[64,38,52,4],[64,58,52,11,"getOptions"],[64,68,52,21],[64,70,52,4],[64,96,52,29,"undefined"],[64,105,52,4],[65,0,53,3],[65,5,39,28],[65,7,53,5],[65,8,53,6,"getState"],[65,16,53,5],[65,18,53,16,"getOptionsFromListener"],[65,40,53,5],[65,42,53,40,"getOptions"],[65,52,53,5],[65,54,53,52,"key"],[65,57,53,5],[65,58,39,28],[65,59,39,2],[66,0,55,2,"React"],[66,4,55,2,"React"],[66,9,55,7],[66,10,55,8,"useEffect"],[66,19,55,2],[66,20,55,18],[66,32,55,24],[67,0,56,4],[67,13,56,11,"parentAddOptionsGetter"],[67,35,56,4],[67,55,56,11,"parentAddOptionsGetter"],[67,77,56,33],[67,78,56,36,"key"],[67,81,56,33],[67,83,56,42,"getCurrentOptions"],[67,100,56,33],[67,101,56,4],[68,0,57,3],[68,5,55,2],[68,7,57,5],[68,8,57,6,"getCurrentOptions"],[68,25,57,5],[68,27,57,25,"parentAddOptionsGetter"],[68,49,57,5],[68,51,57,49,"key"],[68,54,57,5],[68,55,55,2],[69,0,59,2],[69,8,59,8,"addOptionsGetter"],[69,24,59,24],[69,27,59,27,"React"],[69,32,59,32],[69,33,59,33,"useCallback"],[69,44,59,27],[69,45,60,4],[69,55,60,5,"key"],[69,58,60,4],[69,60,60,18,"getter"],[69,66,60,4],[69,68,60,62],[70,0,61,6,"optionsGettersFromChild"],[70,6,61,6,"optionsGettersFromChild"],[70,29,61,29],[70,30,61,30,"current"],[70,37,61,6],[70,38,61,38,"key"],[70,41,61,6],[70,45,61,45,"getter"],[70,51,61,6],[71,0,62,6,"setNumberOfChildrenListeners"],[71,6,62,6,"setNumberOfChildrenListeners"],[71,34,62,34],[71,35,62,35],[71,45,62,36,"prev"],[71,49,62,35],[72,0,62,35],[72,15,62,45,"prev"],[72,19,62,49],[72,22,62,52],[72,23,62,35],[73,0,62,35],[73,7,62,34],[73,8,62,6],[74,0,64,6],[74,13,64,13],[74,25,64,19],[75,0,65,8,"setNumberOfChildrenListeners"],[75,8,65,8,"setNumberOfChildrenListeners"],[75,36,65,36],[75,37,65,37],[75,47,65,38,"prev"],[75,51,65,37],[76,0,65,37],[76,17,65,47,"prev"],[76,21,65,51],[76,24,65,54],[76,25,65,37],[77,0,65,37],[77,9,65,36],[77,10,65,8],[78,0,67,8],[78,15,67,15,"optionsGettersFromChild"],[78,38,67,38],[78,39,67,39,"current"],[78,46,67,15],[78,47,67,47,"key"],[78,50,67,15],[78,51,67,8],[79,0,68,7],[79,7,64,6],[80,0,69,5],[80,5,59,27],[80,7,70,4],[80,9,59,27],[80,10,59,2],[81,0,73,2],[81,8,73,8,"hasAnyChildListener"],[81,27,73,27],[81,30,73,30,"React"],[81,35,73,35],[81,36,73,36,"useMemo"],[81,43,73,30],[81,44,74,4],[82,0,74,4],[82,13,74,10,"numberOfChildrenListeners"],[82,38,74,35],[82,41,74,38],[82,42,74,4],[83,0,74,4],[83,5,73,30],[83,7,75,4],[83,8,75,5,"numberOfChildrenListeners"],[83,33,75,4],[83,34,73,30],[83,35,73,2],[84,0,78,2],[84,11,78,9],[85,0,79,4,"addOptionsGetter"],[85,6,79,4,"addOptionsGetter"],[85,22,79,20],[85,24,79,4,"addOptionsGetter"],[85,40,78,9],[86,0,80,4,"getCurrentOptions"],[86,6,80,4,"getCurrentOptions"],[86,23,80,21],[86,25,80,4,"getCurrentOptions"],[86,42,78,9],[87,0,81,4,"hasAnyChildListener"],[87,6,81,4,"hasAnyChildListener"],[87,25,81,23],[87,27,81,4,"hasAnyChildListener"],[88,0,78,9],[88,5,78,2],[89,0,83,1]],"functionMap":{"names":["<global>","useOptionsGetters","React.useCallback$argument_0","React.useEffect$argument_0","setNumberOfChildrenListeners$argument_0","<anonymous>","React.useMemo$argument_0"],"mappings":"AAA;eCI;mDCqB;GDW;8CCE;GDc;kBEE;GFE;ICG;mCEE,kBF;aGE;qCDC,kBC;OHG;KDC;IKK,mCL;CDS"}},"type":"js/module"}]}